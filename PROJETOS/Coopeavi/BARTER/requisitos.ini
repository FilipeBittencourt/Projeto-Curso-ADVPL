



TCP:TCP_TI04
AMbiente:TI04

Login:facile.analista
Senha:@Fac8759K

---------------------------------------------------------

SLQ - ORùAMENTO  - 
LQ_YTROCA,  
LQ_YQTDTRO (Quantidade de troca , para pedidos criados com produtos essa finalidade LQ_YTROCA)
LQ_YPRETRO (Preùo unitùrio do produto para troca)


SLR - ITENS DO ORùAMENTO - 
LR_YTROCA, 
LR_YQTDTRO (Quantidade de troca , para pedidos criados com produtos essa finalidade LQ_YTROCA)
LR_YPRETRO (Preùo unitùrio do produto para troca)

SL1 - ORùAMENTO - L1_YTROCA ,  
L1_YQTDTRO (Quantidade de troca , para pedidos criados com produtos essa finalidade L1_YTROCA)
L1_YPRETRO (Preùo unitùrio do produto para troca)

SL2 - ITENS DO ORùAMENTO - L2_YTROCA, 
L2_YQTDTRO (Quantidade de troca , para pedidos criados com produtos essa finalidade L2_YTROCA)
L2_YPRETRO (Preùo unitùrio do produto para troca)

   

Gatilho: LR_YTROCA 

Parametro:   MV_YBARTER : Condiùao de pagamento BARTER, caso tenha mais de um
Parametro:   MV_YFILBAR : eEscolhas das Filiais que estarùo no processo BARTER
FORMULA PP5  = IIF(M->LQ_YCOND $ SUPERGETMV('MV_YBARTER',.T.,'251') .AND. SM0->M0_CODFIL $ SUPERGETMV('MV_YFILBAR',.T.,'01'),.T.,.F.)
** COLOCAR FORMULA NO MODO DE EXIBIùùO DO CAMPO LQ_YTROCA


LQ_YAFERIC
LR_PRODUTO
LR_QUANT
LR_VRUNIT
LR_VRITEM
LR_DESC
LR_VALDESC




//1 - Criaùùo de condiùùo de pagamento especùfica para BARTER; - ok

/*
2 - Campo customizado no cabeùalho do orùamento (venda assistida) para informar o produto Cafù (combobox ou F3) 
filtrando somente os produtos elegùveis para troca em insumos; - OK
*/

/*
3 - Campo customizado no cabeùalho do orùamento para mostrar a quantidade do produto informado no campo 1 
que deverù ser entregue pelo cliente em troca do insumos (itens) do orùamento. A conversùo serù a soma do 
valor dos itens no orùamento dividido pelo preùo do produto informado no campo 1; ok
*/

//4 - Os campos customizados sù ficarùo habilitados quando for selecionada a condiùùo de pagamento BARTER criada no item 1 ; - OK

5 - Cada orùamento farù exclusivamente a troca (BARTER) de um tipo de cafù;

/* 
6 - A cada item incluùdo ou alterado (produto, qtd ou preùo) na grid de itens do orùamento, o campo criado no item 3 
deverù ser atualizado em tempo real com a quantidade convertida; - ok
*/

/*
7 - Deverùo ser armazenados na confirmaùùo do orùamento os dados referente a troca, ou seja, preùo de venda no momento da operaùùo,
 quantidade de SACAS, produto(s), quantidade(s) e preùos;
 */

8 - O escopo acima deverù ser realizado considerando as customizaùùes jù existentes na rotina mantendo-as em pleno funcionamento; 

9 - Os campos customizados e regras de barter deverùo estar:
        Alterùveis somente nas filiais onde o processo do barter estiver ativo.
        Criar parùmetro para configurar o processo nas filiais. 
        Informar o produto filtrando somente os produtos elegùveis para troca em insumos;

